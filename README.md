# Mapper

**IMPORTANT DISCLAIMER:** This README and the associated code examples were generated by GPT (an AI language model). While efforts have been made to ensure accuracy, the content should be thoroughly reviewed and tested before implementation. The hypotheses and examples presented here may not fully reflect the actual implementation or best practices. Please verify all information and adapt as necessary for your specific use case.

Mapper is a flexible Ruby library for mapping data structures. It allows you to easily transform input hashes into output hashes with different key names and optional transformations.

## Installation

Add this line to your application's Gemfile:

```ruby
gem 'mapper'
```

And then execute:

```
$ bundle install
```

Or install it yourself as:

```
$ gem install mapper
```

## Usage

### Basic Mapping

To use Mapper, create a class that inherits from `Mapper` and define your mappings:

```ruby
class UserMapper < Mapper
  map 'id', to: :user_id
  map 'name', to: :full_name
  map 'email_address', to: :email
end

input = {
  'id' => '123',
  'name' => 'John Doe',
  'email_address' => 'john@example.com'
}

result = UserMapper.call(input)
# => { user_id: '123', full_name: 'John Doe', email: 'john@example.com' }
```

### Nested Attributes

You can map nested attributes using an array of keys:

```ruby
class ProfileMapper < Mapper
  map 'user_id', to: :id
  map ['address', 'city'], to: :city
  map ['address', 'country'], to: :country
end

input = {
  'user_id' => '456',
  'address' => {
    'city' => 'New York',
    'country' => 'USA'
  }
}

result = ProfileMapper.call(input)
# => { id: '456', city: 'New York', country: 'USA' }
```

### Optional Fields

You can mark fields as optional:

```ruby
class PostMapper < Mapper
  map 'id', to: :post_id
  map 'title', to: :post_title
  map 'body', to: :content, optional: true
end

input = { 'id' => '789', 'title' => 'Hello World' }

result = PostMapper.call(input)
# => { post_id: '789', post_title: 'Hello World', content: nil }
```

### Value Transformations

You can provide a lambda to transform values:

```ruby
class CommentMapper < Mapper
  map 'id', to: :comment_id
  map 'created_at', to: :timestamp, use: ->(val) { Time.parse(val).to_i }
end

input = { 'id' => '101', 'created_at' => '2023-05-20T14:30:00Z' }

result = CommentMapper.call(input)
# => { comment_id: '101', timestamp: 1684592400 }
```

## Contributing

Bug reports and pull requests are welcome on GitHub at
